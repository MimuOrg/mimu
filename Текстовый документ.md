\# –ü–æ–ª–Ω–∞—è —Å–≤–æ–¥–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ Mimu (Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)



\## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è



\*\*–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:\*\* Mimu  

\*\*–í–µ—Ä—Å–∏—è:\*\* 1.0.0+1  

\*\*–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã:\*\* Android, iOS, Web, Linux, macOS, Windows  

\*\*–Ø–∑—ã–∫:\*\* Dart (Flutter SDK >=3.1.0 <4.0.0)  

\*\*–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:\*\* Provider –¥–ª—è state management, REST API + WebSocket –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏



---



\## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞



\### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π



```

lib/

‚îú‚îÄ‚îÄ app/                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

‚îÇ   ‚îú‚îÄ‚îÄ navigation\_service.dart  # –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏

‚îÇ   ‚îú‚îÄ‚îÄ routes.dart             # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

‚îÇ   ‚îî‚îÄ‚îÄ theme.dart              # –¢–µ–º—ã –∏ —Å—Ç–∏–ª–∏

‚îÇ

‚îú‚îÄ‚îÄ data/                   # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –¥–∞–Ω–Ω—ã–µ

‚îÇ   ‚îú‚îÄ‚îÄ api\_service.dart        # –ë–∞–∑–æ–≤—ã–π HTTP –∫–ª–∏–µ–Ω—Ç

‚îÇ   ‚îú‚îÄ‚îÄ server\_config.dart      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤

‚îÇ   ‚îú‚îÄ‚îÄ models/                 # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat\_models.dart

‚îÇ   ‚îú‚îÄ‚îÄ services/               # –°–µ—Ä–≤–∏—Å—ã

‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth\_service.dart

‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ websocket\_service.dart

‚îÇ   ‚îú‚îÄ‚îÄ chat\_store.dart         # –•—Ä–∞–Ω–∏–ª–∏—â–µ —á–∞—Ç–æ–≤ (Provider)

‚îÇ   ‚îú‚îÄ‚îÄ message\_api.dart        # API –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π

‚îÇ   ‚îú‚îÄ‚îÄ file\_api.dart           # API –¥–ª—è —Ñ–∞–π–ª–æ–≤

‚îÇ   ‚îú‚îÄ‚îÄ user\_service.dart       # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

‚îÇ   ‚îú‚îÄ‚îÄ settings\_service.dart   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

‚îÇ   ‚îú‚îÄ‚îÄ browser\_service.dart    # –ë—Ä–∞—É–∑–µ—Ä (–∏—Å—Ç–æ—Ä–∏—è, –∑–∞–∫–ª–∞–¥–∫–∏)

‚îÇ   ‚îú‚îÄ‚îÄ channel\_service.dart    # –ö–∞–Ω–∞–ª—ã

‚îÇ   ‚îú‚îÄ‚îÄ status\_service.dart     # –°—Ç–∞—Ç—É—Å—ã (24 —á–∞—Å–∞)

‚îÇ   ‚îî‚îÄ‚îÄ sync\_service.dart       # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º

‚îÇ

‚îú‚îÄ‚îÄ features/              # UI —ç–∫—Ä–∞–Ω—ã

‚îÇ   ‚îú‚îÄ‚îÄ auth\_screen.dart        # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

‚îÇ   ‚îú‚îÄ‚îÄ shell\_ui.dart           # –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (—á–∞—Ç—ã/–∑–≤–æ–Ω–∫–∏/–±—Ä–∞—É–∑–µ—Ä)

‚îÇ   ‚îú‚îÄ‚îÄ chat\_screen.dart         # –≠–∫—Ä–∞–Ω —á–∞—Ç–∞

‚îÇ   ‚îú‚îÄ‚îÄ call\_screen.dart        # –≠–∫—Ä–∞–Ω –∑–≤–æ–Ω–∫–∞

‚îÇ   ‚îú‚îÄ‚îÄ profile\_screen.dart     # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

‚îÇ   ‚îú‚îÄ‚îÄ settings\_hub.dart       # –ù–∞—Å—Ç—Ä–æ–π–∫–∏

‚îÇ   ‚îú‚îÄ‚îÄ premium\_screen.dart     # –ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞

‚îÇ   ‚îú‚îÄ‚îÄ status\_screen.dart      # –°—Ç–∞—Ç—É—Å—ã

‚îÇ   ‚îú‚îÄ‚îÄ channel\_screen.dart     # –ö–∞–Ω–∞–ª

‚îÇ   ‚îú‚îÄ‚îÄ group\_settings\_screen.dart

‚îÇ   ‚îú‚îÄ‚îÄ browser\_view.dart       # –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä

‚îÇ   ‚îú‚îÄ‚îÄ create\_entities.dart    # –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø/–∫–∞–Ω–∞–ª–æ–≤

‚îÇ   ‚îî‚îÄ‚îÄ calls/                  # –ó–≤–æ–Ω–∫–∏ (WebRTC + E2EE)

‚îÇ       ‚îú‚îÄ‚îÄ webrtc\_service.dart

‚îÇ       ‚îú‚îÄ‚îÄ call\_controller.dart

‚îÇ       ‚îú‚îÄ‚îÄ callkit\_service.dart

‚îÇ       ‚îú‚îÄ‚îÄ signal\_crypto.dart

‚îÇ       ‚îî‚îÄ‚îÄ ...

‚îÇ

‚îî‚îÄ‚îÄ shared/                # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

&nbsp;   ‚îú‚îÄ‚îÄ animated\_widgets.dart

&nbsp;   ‚îú‚îÄ‚îÄ cupertino\_dialogs.dart

&nbsp;   ‚îú‚îÄ‚îÄ enhanced\_ui\_components.dart

&nbsp;   ‚îú‚îÄ‚îÄ glass\_widgets.dart

&nbsp;   ‚îú‚îÄ‚îÄ rich\_black\_animations.dart

&nbsp;   ‚îî‚îÄ‚îÄ enhanced\_search\_filters.dart

```



---



\## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã



\### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è



\#### `main.dart`

\- \*\*–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤:\*\* SettingsService, UserService, BrowserService, ChannelService, StatusService

\- \*\*Provider setup:\*\* ThemeProvider, FontProvider, ChatStore

\- \*\*–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞:\*\* `/auth` (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)



\#### `lib/data/server\_config.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤



\*\*–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:\*\*

\- `messageServer`: `http://10.147.17.50:8080` (ZeroTier —Å–µ—Ä–≤–µ—Ä)

\- `fileServer`, `mediaServer`, `voiceServer`, `syncServer`: –≤—Å–µ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ —Ç–æ—Ç –∂–µ —Å–µ—Ä–≤–µ—Ä

\- `requestTimeout`: 15 —Å–µ–∫—É–Ω–¥ (–¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏)

\- `uploadTimeout`: 5 –º–∏–Ω—É—Ç

\- `maxRetries`: 3 –ø–æ–ø—ã—Ç–∫–∏

\- `maxFileSize`: 100 MB

\- `maxImageSize`: 10 MB

\- `maxVoiceSize`: 5 MB



\*\*–ú–µ—Ç–æ–¥—ã:\*\*

\- `getApiBaseUrl()` - –±–∞–∑–æ–≤—ã–π URL –¥–ª—è API

\- `getFileUploadUrl()` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

\- `getFileDownloadUrl(fileId)` - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

\- `getMediaUploadUrl()` - –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞

\- `getVoiceUploadUrl()` - –∑–∞–≥—Ä—É–∑–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

\- `getSyncUrl()` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è



---



\### 2. API –∏ —Å–µ—Ç–µ–≤–æ–π —Å–ª–æ–π



\#### `lib/data/api\_service.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –ë–∞–∑–æ–≤—ã–π HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤



\*\*–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:\*\*

\- Singleton –ø–∞—Ç—Ç–µ—Ä–Ω

\- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (`X-PrID`, `X-Client-Version`, `X-Platform`)

\- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª—å

\- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

\- Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

\- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GET, POST, PUT, DELETE

\- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (multipart/form-data)

\- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤



\*\*–ú–µ—Ç–æ–¥—ã:\*\*

\- `get(endpoint, queryParams, headers)` - GET –∑–∞–ø—Ä–æ—Å

\- `post(endpoint, body, headers)` - POST –∑–∞–ø—Ä–æ—Å

\- `put(endpoint, body, headers)` - PUT –∑–∞–ø—Ä–æ—Å

\- `delete(endpoint, headers)` - DELETE –∑–∞–ø—Ä–æ—Å

\- `uploadFile(endpoint, file, fileName, additionalFields, onProgress)` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞

\- `downloadFile(url, headers, onProgress)` - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

\- `retryRequest(request, maxRetries, delay)` - –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏



\*\*–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:\*\*

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

```

=== API POST Request ===

URL: http://10.147.17.50:8080/api/v1/messages

Headers: {...}

Body: {...}

=======================



=== API Response ===

Status Code: 200

Response Body: {...}

Headers: {...}

===================

```



\#### `lib/data/message\_api.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏



\*\*–ú–µ—Ç–æ–¥—ã:\*\*

\- `sendTextMessage(chatId, text, replyToMessageId)` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç

\- `sendMediaMessage(chatId, fileId, type, caption, replyToMessageId)` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ–¥–∏–∞

\- `sendVoiceMessage(chatId, fileId, durationSeconds, replyToMessageId)` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ

\- `sendFileMessage(chatId, fileId, fileName, fileSize, caption, replyToMessageId)` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª

\- `editMessage(chatId, messageId, newText)` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

\- `deleteMessage(chatId, messageId)` - —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

\- `addReaction(chatId, messageId, emoji)` - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é

\- `removeReaction(chatId, messageId, emoji)` - —É–¥–∞–ª–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é

\- `getMessages(chatId, limit, beforeMessageId)` - –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

\- `markAsRead(chatId, messageId)` - –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ

\- `forwardMessage(fromChatId, messageId, toChatIds)` - –ø–µ—Ä–µ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ



\*\*Endpoints:\*\*

\- `POST /api/v1/messages` - —Å–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

\- `PUT /api/v1/messages/{messageId}` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

\- `DELETE /api/v1/messages/{messageId}` - —É–¥–∞–ª–∏—Ç—å

\- `GET /api/v1/messages?chatId=...` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫

\- `POST /api/v1/messages/{messageId}/reactions` - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é

\- `DELETE /api/v1/messages/{messageId}/reactions` - —É–¥–∞–ª–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é

\- `POST /api/v1/messages/{messageId}/read` - –æ—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º

\- `POST /api/v1/messages/{messageId}/forward` - –ø–µ—Ä–µ—Å–ª–∞—Ç—å



\#### `lib/data/file\_api.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏



\*\*–ú–µ—Ç–æ–¥—ã:\*\*

\- `uploadFile(file, type, fileName, onProgress)` - –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª

\- `downloadFile(fileId, fileName, onProgress)` - —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª

\- `getFileInfo(fileId)` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ

\- `deleteFile(fileId)` - —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª

\- `uploadImage(file, fileName, onProgress)` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

\- `uploadVideo(file, fileName, onProgress)` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ

\- `uploadVoice(file, fileName, onProgress)` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ

\- `uploadDocument(file, fileName, onProgress)` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç

\- `getPreviewUrl(fileId, thumbnail)` - URL –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞

\- `getStreamUrl(fileId)` - URL –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è



\*\*–í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤:\*\*

\- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –¥–æ 10 MB

\- –í–∏–¥–µ–æ: –¥–æ 100 MB

\- –ì–æ–ª–æ—Å–æ–≤—ã–µ: –¥–æ 5 MB

\- –§–∞–π–ª—ã: –¥–æ 100 MB



\#### `lib/data/services/websocket\_service.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* WebSocket –∫–ª–∏–µ–Ω—Ç –¥–ª—è real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏



\*\*–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:\*\*

\- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ `ws://10.147.17.50:8080/ws`

\- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Bearer token

\- Heartbeat –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤ (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥)

\- Broadcast stream –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–±—ã—Ç–∏–π

\- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ–±—Ä—ã–≤–µ



\*\*–ú–µ—Ç–æ–¥—ã:\*\*

\- `connect()` - –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ WebSocket

\- `disconnect()` - –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è

\- `sendJson(event)` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å JSON —Å–æ–±—ã—Ç–∏–µ

\- `startCallHeartbeat(callId, toUserId)` - –Ω–∞—á–∞—Ç—å heartbeat –¥–ª—è –∑–≤–æ–Ω–∫–∞

\- `stopCallHeartbeat()` - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å heartbeat



\*\*–°–æ–±—ã—Ç–∏—è:\*\*

\- `call\_offer` - –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫

\- `call\_answer` - –æ—Ç–≤–µ—Ç –Ω–∞ –∑–≤–æ–Ω–æ–∫

\- `call\_ice\_candidate` - ICE –∫–∞–Ω–¥–∏–¥–∞—Ç

\- `call\_hangup` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞

\- `call\_heartbeat` - heartbeat



---



\### 3. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö



\#### `lib/data/models/chat\_models.dart`



\*\*ChatMessage:\*\*

```dart

\- id: String

\- type: ChatMessageType (text, image, voice, file, call, location, poll, sticker)

\- text: String?

\- mediaPath: String?

\- voiceDurationSeconds: int?

\- isMe: bool

\- timestamp: DateTime

\- isRead: bool

\- isEdited: bool

\- reactions: Map<String, int>

\- editedText: String?

```



\*\*ChatThread:\*\*

```dart

\- id: String

\- title: String

\- avatarAsset: String

\- isGroup: bool

\- chatType: ChatType (regular, secret, cloud, group, channel)

\- participantIds: List<String>

\- messages: List<ChatMessage>

\- updatedAt: DateTime

\- description: String?

```



\*\*ChatContact:\*\*

```dart

\- id: String

\- name: String

\- avatarAsset: String

```



\*\*ChatType enum:\*\*

\- `regular` - –æ–±—ã—á–Ω—ã–π —á–∞—Ç

\- `secret` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —á–∞—Ç (E2EE)

\- `cloud` - –æ–±–ª–∞—á–Ω—ã–π —á–∞—Ç

\- `group` - –≥—Ä—É–ø–ø–∞

\- `channel` - –∫–∞–Ω–∞–ª



---



\### 4. State Management



\#### `lib/data/chat\_store.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —á–∞—Ç–æ–≤ (ChangeNotifier)



\*\*–•—Ä–∞–Ω–µ–Ω–∏–µ:\*\*

\- SharedPreferences –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

\- –ö–ª—é—á–∏: `chat\_threads\_v1`, `chat\_contacts\_v1`, `chat\_blocked\_contacts\_v1`, `chat\_ignored\_contacts\_v1`, `chat\_custom\_names\_v1`



\*\*–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:\*\*

\- `init()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

\- `createChat(title, isGroup, chatType, participantIds, avatarAsset)` - —Å–æ–∑–¥–∞—Ç—å —á–∞—Ç

\- `addMessage(chatId, message)` - –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

\- `editMessage(chatId, messageId, newText)` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

\- `deleteMessage(chatId, messageId)` - —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

\- `syncMessages(chatId)` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–æ–º

\- `addReaction(chatId, messageId, emoji)` - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é

\- `forwardMessage(fromChatId, messageId, toChatId)` - –ø–µ—Ä–µ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

\- `updateChatAvatar(chatId, avatarAsset)` - –æ–±–Ω–æ–≤–∏—Ç—å –∞–≤–∞—Ç–∞—Ä

\- `updateChatTitle(chatId, title)` - –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ

\- `deleteChat(chatId)` - —É–¥–∞–ª–∏—Ç—å —á–∞—Ç

\- `addContact(contact)` - –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç

\- `setContactBlocked(contactId, blocked)` - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç

\- `setContactIgnored(contactId, ignored)` - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç

\- `renameContact(contactId, newName)` - –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç

\- `clearChatHistory(chatId)` - –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é

\- `getMediaMessages(chatId)` - –ø–æ–ª—É—á–∏—Ç—å –º–µ–¥–∏–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

\- `getFileMessages(chatId)` - –ø–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª—ã

\- `searchInChat(chatId, query)` - –ø–æ–∏—Å–∫ –≤ —á–∞—Ç–µ

\- `addParticipant(chatId, participantId)` - –¥–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞

\- `removeParticipant(chatId, participantId)` - —É–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞

\- `updateChatDescription(chatId, newDescription)` - –æ–±–Ω–æ–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ



\*\*–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:\*\*

\- –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)

\- –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –≤ –Ω–µ–≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö —á–µ—Ä–µ–∑ WebSocket

\- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏—è (–∫–∞–∂–¥—ã–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π)



---



\### 5. –°–µ—Ä–≤–∏—Å—ã



\#### `lib/data/user\_service.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è



\*\*–•—Ä–∞–Ω–µ–Ω–∏–µ (SharedPreferences):\*\*

\- `user\_username` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

\- `user\_display\_name` - –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è

\- `user\_avatar\_path` - –ø—É—Ç—å –∫ –∞–≤–∞—Ç–∞—Ä—É

\- `user\_prid` - Public ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

\- `auth\_access\_token` - JWT —Ç–æ–∫–µ–Ω



\*\*–ú–µ—Ç–æ–¥—ã:\*\*

\- `getUsername()` / `setUsername(username)`

\- `getDisplayName()` / `setDisplayName(name)`

\- `getAvatarPath()` / `setAvatarPath(path)`

\- `getPrId()` / `setPrId(prid)`

\- `getAccessToken()` / `setAccessToken(token)`

\- `generateRandomPrId()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ PrID



\#### `lib/data/settings\_service.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è



\*\*–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:\*\*



\*\*–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:\*\*

\- `getNotificationsEnabled()` / `setNotificationsEnabled()`

\- `getNotificationSoundEnabled()` / `setNotificationSoundEnabled()`

\- `getNotificationPreviewEnabled()` / `setNotificationPreviewEnabled()`

\- `getInAppNotificationsEnabled()` / `setInAppNotificationsEnabled()`

\- `getNotificationSoundName()` / `setNotificationSoundName()`



\*\*–í–∏–¥–µ–æ:\*\*

\- `getAutoDownloadVideo()` / `setAutoDownloadVideo()`

\- `getTrafficSaving()` / `setTrafficSaving()`



\*\*–ë—Ä–∞—É–∑–µ—Ä:\*\*

\- `getVSLEnabled()` / `setVSLEnabled()` (Virtual Scroll List)

\- `getSearchEngine()` / `setSearchEngine()`

\- `getReadingMode()` / `setReadingMode()`

\- `getAutoTranslate()` / `setAutoTranslate()`

\- `getPhishingProtection()` / `setPhishingProtection()`

\- `getHttpsOnly()` / `setHttpsOnly()`

\- `getBiometricProtection()` / `setBiometricProtection()`

\- `getAcceptCookies()` / `setAcceptCookies()`



\*\*–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:\*\*

\- `getConnection()` / `setConnection()`

\- `getUseProxy()` / `setUseProxy()`

\- `getAutoConnect()` / `setAutoConnect()`



\*\*–í–Ω–µ—à–Ω–∏–π –≤–∏–¥:\*\*

\- `getTheme()` / `setTheme()` - —Ç–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è

\- `getLanguage()` / `setLanguage()` - —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

\- `getFont()` / `setFont()` - —à—Ä–∏—Ñ—Ç (Inter, Roboto, Open Sans, Lato, Montserrat, Poppins, Nunito, Raleway, Antic)

\- `getFontSize()` / `setFontSize()` - —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞

\- `getFontStyle()` / `setFontStyle()` - —Å—Ç–∏–ª—å (Regular, Light, Medium, SemiBold, Bold, ExtraBold, Italic, Bold Italic)



\*\*–ó–≤—É–∫:\*\*

\- `getSoundProfile()` / `setSoundProfile()`

\- `getAudioInput()` / `setAudioInput()`

\- `getAudioOutput()` / `setAudioOutput()`



\*\*–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:\*\*

\- `getPowerSaving()` / `setPowerSaving()`

\- `getAnimationsEnabled()` / `setAnimationsEnabled()`

\- `getOptimizeMimu()` / `setOptimizeMimu()`



\*\*–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å:\*\*

\- `getLastSeenEnabled()` / `setLastSeenEnabled()`

\- `getReadReceiptsEnabled()` / `setReadReceiptsEnabled()`

\- `getProfilePhotoVisible()` / `setProfilePhotoVisible()`

\- `getStatusVisible()` / `setStatusVisible()`

\- `getWhoCanAddMe()` / `setWhoCanAddMe()`

\- `getTwoFactorEnabled()` / `setTwoFactorEnabled()`

\- `getScreenLockEnabled()` / `setScreenLockEnabled()`

\- `getSelfDestructMessages()` / `setSelfDestructMessages()`

\- `getEncryptionEnabled()` / `setEncryptionEnabled()`

\- `getSearchByUsername()` / `setSearchByUsername()`

\- `getAutoDeleteMessages()` / `setAutoDeleteMessages()`

\- `getAutoDeleteTime()` / `setAutoDeleteTime()` (—á–∞—Å—ã)

\- `getHideLastSeenTime()` / `setHideLastSeenTime()`

\- `getHideTypingStatus()` / `setHideTypingStatus()`

\- `getScreenshotProtection()` / `setScreenshotProtection()`

\- `getHideForwarding()` / `setHideForwarding()`

\- `getHideCopying()` / `setHideCopying()`

\- `getHidePhoneNumber()` / `setHidePhoneNumber()`

\- `getCloudSync()` / `setCloudSync()`



\*\*–ß–∞—Ç:\*\*

\- `isChatMuted(chatId)` / `setChatMuted(chatId, muted)`

\- `isChatPinned(chatId)` / `setChatPinned(chatId, pinned)`

\- `getCompactMode()` / `setCompactMode()`

\- `getShowTimestamps()` / `setShowTimestamps()`

\- `getShowReadReceipts()` / `setShowReadReceipts()`

\- `getShowOnlineStatus()` / `setShowOnlineStatus()`

\- `getSwipeToReply()` / `setSwipeToReply()`

\- `getDoubleTapToLike()` / `setDoubleTapToLike()`

\- `getSwipeNavigation()` / `setSwipeNavigation()`

\- `getMessageAnimations()` / `setMessageAnimations()`

\- `getHapticFeedback()` / `setHapticFeedback()`

\- `getSoundEffects()` / `setSoundEffects()`

\- `getShowTypingIndicator()` / `setShowTypingIndicator()`

\- `getAutoPlayMedia()` / `setAutoPlayMedia()`

\- `getSaveMediaToGallery()` / `setSaveMediaToGallery()`

\- `getShowMessagePreview()` / `setShowMessagePreview()`

\- `getGroupNotifications()` / `setGroupNotifications()`

\- `getMentionNotifications()` / `setMentionNotifications()`

\- `getReactionNotifications()` / `setReactionNotifications()`



\*\*–°—Ç–∏–ª—å —á–∞—Ç–∞:\*\*

\- `getGradientBubbles()` / `setGradientBubbles()`

\- `getMessageShadow()` / `setMessageShadow()`

\- `getDecorativeIcons()` / `setDecorativeIcons()`

\- `getBubbleRadius()` / `setBubbleRadius()` (double)

\- `getChatBackgroundOpacity()` / `setChatBackgroundOpacity()` (double)



\*\*–ì—Ä—É–ø–ø—ã:\*\*

\- `getGroupOnlyAdminsPost(chatId)` / `setGroupOnlyAdminsPost(chatId, value)`

\- `getGroupOnlyAdminsAdd(chatId)` / `setGroupOnlyAdminsAdd(chatId, value)`

\- `getGroupVisibility(chatId)` / `setGroupVisibility(chatId, value)`



\*\*–ü—Ä–µ–º–∏—É–º:\*\*

\- `getIsPremium()` / `setIsPremium()`

\- `getPremiumType()` / `setPremiumType()`



\*\*–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —á–∞—Ç–æ–≤:\*\*

\- `saveChatMessages(chatId, messages)` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

\- `getChatMessages(chatId)` - –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

\- `saveLastOpenedChat(chatId)` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç–∫—Ä—ã—Ç—ã–π —á–∞—Ç

\- `getLastOpenedChat()` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç–∫—Ä—ã—Ç—ã–π —á–∞—Ç

\- `saveChatScrollPosition(chatId, position)` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

\- `getChatScrollPosition(chatId)` - –ø–æ–ª—É—á–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø—Ä–æ–∫—Ä—É—Ç–∫–∏



\#### `lib/data/browser\_service.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –±—Ä–∞—É–∑–µ—Ä–æ–º



\*\*–§—É–Ω–∫—Ü–∏–∏:\*\*

\- –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–µ–Ω–∏–π (–¥–æ 100 –∑–∞–ø–∏—Å–µ–π)

\- –ó–∞–∫–ª–∞–¥–∫–∏ —Å –ø–∞–ø–∫–∞–º–∏

\- –ó–∞–≥—Ä—É–∑–∫–∏ (–¥–æ 50 –∑–∞–ø–∏—Å–µ–π)

\- –†–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ



\*\*–ú–µ—Ç–æ–¥—ã:\*\*

\- `getHistory()` / `addToHistory(title, url)` / `clearHistory()` / `removeFromHistory(index)`

\- `getBookmarks()` / `addBookmark(title, url)` / `removeBookmark(url)` / `isBookmarked(url)`

\- `getBookmarkFolders()` / `addBookmarkFolder(name)` / `addBookmarkToFolder(url, folderId)`

\- `getDownloads()` / `addDownload(fileName, url, path)` / `removeDownload(index)`

\- `getIncognitoMode()` / `setIncognitoMode(value)`

\- `formatTime(isoString)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏



\#### `lib/data/channel\_service.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏



\*\*–§—É–Ω–∫—Ü–∏–∏:\*\*

\- –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã

\- –ü–æ—Å—Ç—ã –≤ –∫–∞–Ω–∞–ª–∞—Ö

\- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤



\*\*–ú–µ—Ç–æ–¥—ã:\*\*

\- `getSubscribedChannels()` / `isSubscribed(channelName)` / `subscribe(channelName)` / `unsubscribe(channelName)`

\- `getChannelPosts(channelName)` / `addPost(channelName, text)` / `editPost(channelName, postId, newText)` / `deletePost(channelName, postId)`

\- `getChannelNotifications(channelName)` / `setChannelNotifications(channelName, enabled)`

\- `searchInChannel(channelName, query)` - –ø–æ–∏—Å–∫ –≤ –∫–∞–Ω–∞–ª–µ



\#### `lib/data/status\_service.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ (24 —á–∞—Å–∞)



\*\*–§—É–Ω–∫—Ü–∏–∏:\*\*

\- –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)

\- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞

\- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏



\*\*–ú–µ—Ç–æ–¥—ã:\*\*

\- `getStatuses()` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ç—É—Å—ã (—Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏—Å—Ç–µ–∫—à–∏—Ö)

\- `addStatus(imagePath, isMe)` - –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å

\- `deleteStatus(statusId)` - —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ç—É—Å

\- `getStatusPrivacy()` / `setStatusPrivacy(privacy)`

\- `getMyStatus()` - –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å



\#### `lib/data/sync\_service.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–æ–º



\*\*–§—É–Ω–∫—Ü–∏–∏:\*\*

\- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

\- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —á–∞—Ç–æ–≤ –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–∞—Ç–∞

\- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è



\*\*–ú–µ—Ç–æ–¥—ã:\*\*

\- `startAutoSync(chatStore)` - –Ω–∞—á–∞—Ç—å –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

\- `stopAutoSync()` - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

\- `syncAllChats(chatStore)` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —á–∞—Ç—ã

\- `syncChat(chatStore, chatId)` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —á–∞—Ç

\- `forceSync(chatStore, chatId?)` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è



\#### `lib/data/services/auth\_service.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–≥–ª—É—à–∫–∞)



\*\*–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:\*\*

\- –ó–∞–≥–ª—É—à–∫–∞ —Å —Ñ–µ–π–∫–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

\- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±–æ–π –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å

\- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–µ–π–∫–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è



\*\*TODO:\*\* –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º API –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–ª–æ–≥–∏–Ω–∞



---



\### 6. UI –≠–∫—Ä–∞–Ω—ã



\#### `lib/features/auth\_screen.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏



\*\*–§—É–Ω–∫—Ü–∏–∏:\*\*

\- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ª–æ–≥–∏–Ω–æ–º –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π

\- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π

\- –ü—Ä–æ–≤–µ—Ä–∫–∞ email/—Ç–µ–ª–µ—Ñ–æ–Ω–∞

\- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞, —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)

\- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞ (6 —Ü–∏—Ñ—Ä)

\- –û–ø—Ü–∏—è "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Mimu"



\*\*–ü–æ–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:\*\*

\- Username

\- Email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω

\- –ü–∞—Ä–æ–ª—å

\- –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å



\*\*–ü–æ–ª—è –ª–æ–≥–∏–Ω–∞:\*\*

\- Email/—Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ PrID

\- –ü–∞—Ä–æ–ª—å



\*\*–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:\*\*

\- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ PrID

\- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ username –∏ display name

\- –ü–µ—Ä–µ—Ö–æ–¥ –∫ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–¥–∞



\#### `lib/features/shell\_ui.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ–±–æ–ª–æ—á–∫–∞)



\*\*–°—Ç—Ä—É–∫—Ç—É—Ä–∞:\*\*

\- PageView —Å 4 –≤–∫–ª–∞–¥–∫–∞–º–∏:

&nbsp; 1. \*\*–ß–∞—Ç—ã\*\* (`\_ChatListPage`) - —Å–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤

&nbsp; 2. \*\*–ó–≤–æ–Ω–∫–∏\*\* (`\_CallsPage`) - –∏—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤

&nbsp; 3. \*\*–ë—Ä–∞—É–∑–µ—Ä\*\* (`\_BrowserPageStateful`) - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä

&nbsp; 4. \*\*–ü—Ä–µ–º–∏—É–º\*\* (`\_PremiumPage`) - –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–∏



\*\*–§—É–Ω–∫—Ü–∏–∏:\*\*

\- –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏

\- –ü–æ–∏—Å–∫ –≤ —á–∞—Ç–∞—Ö

\- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —á–∞—Ç–æ–≤/–≥—Ä—É–ø–ø/–∫–∞–Ω–∞–ª–æ–≤

\- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏

\- –ù–∞—Å—Ç—Ä–æ–π–∫–∏



\#### `lib/features/chat\_screen.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –≠–∫—Ä–∞–Ω —á–∞—Ç–∞



\*\*–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:\*\*

\- `\_MessageBubble` - –ø—É–∑—ã—Ä—å —Å–æ–æ–±—â–µ–Ω–∏—è

\- `\_MessageInputField` - –ø–æ–ª–µ –≤–≤–æ–¥–∞

\- `\_FormattedText` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

\- `\_Spoiler` - —Å–ø–æ–π–ª–µ—Ä

\- `\_VoiceBubble` - –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

\- `\_FileBubble` - —Ñ–∞–π–ª

\- `\_CallBubble` - –∑–≤–æ–Ω–æ–∫

\- `\_LocationBubble` - –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ

\- `\_PollBubble` - –æ–ø—Ä–æ—Å

\- `\_StickerBubble` - —Å—Ç–∏–∫–µ—Ä

\- `\_TypingIndicator` - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏



\*\*–§—É–Ω–∫—Ü–∏–∏:\*\*

\- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

\- –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ)

\- –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

\- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤

\- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

\- –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

\- –†–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

\- –ü–µ—Ä–µ—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

\- –û—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

\- –ü–æ–∏—Å–∫ –≤ —á–∞—Ç–µ

\- –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—é

\- –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö



\#### `lib/features/call\_screen.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –≠–∫—Ä–∞–Ω –∑–≤–æ–Ω–∫–∞



\*\*–§—É–Ω–∫—Ü–∏–∏:\*\*

\- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–≤–æ–Ω–∫–∞

\- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º/–∫–∞–º–µ—Ä–æ–π

\- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã

\- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞



\#### `lib/features/calls/webrtc\_service.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* WebRTC —Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤



\*\*–§—É–Ω–∫—Ü–∏–∏:\*\*

\- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebRTC

\- –°–æ–∑–¥–∞–Ω–∏–µ Offer/Answer

\- –û–±—Ä–∞–±–æ—Ç–∫–∞ ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤

\- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞ –ø–æ—Ç–æ–∫–∞–º–∏

\- E2EE —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Signal Protocol



\#### `lib/features/calls/signal\_crypto.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤ (Signal Protocol)



\*\*–†–µ–∞–ª–∏–∑–∞—Ü–∏–∏:\*\*

\- `DoubleRatchetSignalCrypto` - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Signal Protocol —Å Forward Secrecy

\- `RealSignalCrypto` - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (fallback)



\*\*–ê–ª–≥–æ—Ä–∏—Ç–º—ã:\*\*

\- X25519 ECDH –¥–ª—è key exchange

\- ChaCha20-Poly1305 –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

\- Double Ratchet –¥–ª—è forward secrecy

\- X3DH –¥–ª—è initial key exchange



---



\### 7. –¢–µ–º—ã –∏ —Å—Ç–∏–ª–∏



\#### `lib/app/theme.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –°–∏—Å—Ç–µ–º–∞ —Ç–µ–º –∏ —à—Ä–∏—Ñ—Ç–æ–≤



\*\*–¢–µ–º—ã:\*\*

\- Mimu Classical (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

\- Winter Ocean

\- Melanholic

\- Dark Mode

\- Light Mode

\- Amoled Black

\- Ocean Blue

\- Sunset Orange

\- Forest Green

\- Lavender Purple

\- Rich Black

\- Charcoal

\- Deep Black



\*\*–¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞:\*\*

\- `richBlack`: #000000

\- `deepBlack`: #050505

\- `charcoalBlack`: #0A0A0A

\- `darkCharcoal`: #0F0F0F

\- `mediumBlack`: #1A1A1A

\- `lightBlack`: #252525



\*\*–®—Ä–∏—Ñ—Ç—ã:\*\*

\- Inter (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

\- Roboto

\- Open Sans

\- Lato

\- Montserrat

\- Poppins

\- Nunito

\- Raleway

\- Antic



\*\*FontProvider:\*\*

\- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–º, —Ä–∞–∑–º–µ—Ä–æ–º –∏ —Å—Ç–∏–ª–µ–º

\- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Fonts

\- –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ChangeNotifier



\*\*GlassTheme Extension:\*\*

\- `baseGlass` - –±–∞–∑–æ–≤–æ–µ —Å—Ç–µ–∫–ª—è–Ω–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ

\- `interactiveGlass` - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

\- `panelGlass` - –ø–∞–Ω–µ–ª–∏



---



\### 8. –ù–∞–≤–∏–≥–∞—Ü–∏—è



\#### `lib/app/routes.dart`

\*\*–ú–∞—Ä—à—Ä—É—Ç—ã:\*\*

\- `/auth` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

\- `/` - –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (ShellUI)

\- `/chat` - —ç–∫—Ä–∞–Ω —á–∞—Ç–∞ (—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `chatId`)

\- `/profile` - –ø—Ä–æ—Ñ–∏–ª—å (—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `userName`, `avatarAsset`)

\- `/create\_group` - —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã

\- `/create\_channel` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞

\- `/premium` - –ø—Ä–µ–º–∏—É–º —ç–∫—Ä–∞–Ω



\*\*–ê–Ω–∏–º–∞—Ü–∏–∏:\*\*

\- FadeTransition –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

\- CupertinoPageRoute –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤



\#### `lib/app/navigation\_service.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏



\*\*–ú–µ—Ç–æ–¥—ã:\*\*

\- `createSlideTransitionRoute(page)` - —Å–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π —Å–ª–∞–π–¥–∞

\- –£—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏–π



---



\### 9. –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã



\#### `lib/shared/glass\_widgets.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –í–∏–¥–∂–µ—Ç—ã —Å–æ —Å—Ç–µ–∫–ª—è–Ω–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º



\*\*–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:\*\*

\- `GlassContainer` - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ —Å—Ç–µ–∫–ª—è–Ω–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º

\- –†–∞–∑–º—ã—Ç–∏–µ —Ñ–æ–Ω–∞

\- –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å

\- –¢–µ–Ω–∏



\#### `lib/shared/animated\_widgets.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã



\*\*–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:\*\*

\- –í–∏–¥–∂–µ—Ç—ã —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è

\- –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã

\- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å flutter\_animate



\#### `lib/shared/enhanced\_ui\_components.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã



\*\*–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:\*\*

\- –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

\- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è –≤–≤–æ–¥–∞

\- –ö–∞—Ä—Ç–æ—á–∫–∏

\- –°–ø–∏—Å–∫–∏



\#### `lib/shared/cupertino\_dialogs.dart`

\*\*–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:\*\* –î–∏–∞–ª–æ–≥–∏ –≤ —Å—Ç–∏–ª–µ iOS



\*\*–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:\*\*

\- Alert –¥–∏–∞–ª–æ–≥–∏

\- Action sheets

\- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞



---



\### 10. –ó–≤–æ–Ω–∫–∏ (WebRTC + E2EE)



\#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∑–≤–æ–Ω–∫–æ–≤



\*\*–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:\*\*

\- `webrtc\_service.dart` - WebRTC –ª–æ–≥–∏–∫–∞

\- `call\_controller.dart` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∑–≤–æ–Ω–∫–∞

\- `callkit\_service.dart` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CallKit (iOS/Android)

\- `signal\_crypto.dart` - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤

\- `signal\_double\_ratchet.dart` - Double Ratchet —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

\- `audio\_manager.dart` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ

\- `turn\_config.dart` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TURN —Å–µ—Ä–≤–µ—Ä–∞

\- `calls\_api.dart` - API –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤



\*\*–ü—Ä–æ—Ü–µ—Å—Å –∑–≤–æ–Ω–∫–∞:\*\*

1\. Caller —Å–æ–∑–¥–∞–µ—Ç Offer —á–µ—Ä–µ–∑ WebRTC

2\. Offer —à–∏—Ñ—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Signal Protocol

3\. –û—Ç–ø—Ä–∞–≤–∫–∞ `call\_offer` —á–µ—Ä–µ–∑ WebSocket

4\. –°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ `call\_sessions` (status: `ringing`)

5\. Callee –ø–æ–ª—É—á–∞–µ—Ç `call\_offer` ‚Üí CallKit –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫

6\. Callee –ø—Ä–∏–Ω–∏–º–∞–µ—Ç ‚Üí —Å–æ–∑–¥–∞–µ—Ç Answer ‚Üí —à–∏—Ñ—Ä—É–µ—Ç ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `call\_answer`

7\. –û–±–º–µ–Ω ICE –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏ (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏)

8\. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ P2P —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

9\. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ `call\_hangup`



\*\*–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:\*\*

\- E2EE —á–µ—Ä–µ–∑ Signal Protocol

\- –°–µ—Ä–≤–µ—Ä –Ω–µ –≤–∏–¥–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ SDP/ICE

\- –ö–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∫–∏–¥–∞—é—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

\- TURN credentials –≤—Ä–µ–º–µ–Ω–Ω—ã–µ (1 —á–∞—Å TTL)



---



\## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏



\### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:

\- `flutter` - Flutter SDK

\- `provider: ^6.1.1` - State management

\- `http: ^1.1.0` - HTTP –∫–ª–∏–µ–Ω—Ç

\- `web\_socket\_channel: ^3.0.1` - WebSocket

\- `shared\_preferences: ^2.2.2` - –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

\- `path\_provider: ^2.1.5` - –ü—É—Ç–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º



\### UI –ø–∞–∫–µ—Ç—ã:

\- `google\_fonts: ^6.1.0` - Google Fonts

\- `flutter\_animate: ^4.5.0` - –ê–Ω–∏–º–∞—Ü–∏–∏

\- `phosphor\_flutter: ^2.0.1` - –ò–∫–æ–Ω–∫–∏

\- `cupertino\_icons: ^1.0.6` - iOS –∏–∫–æ–Ω–∫–∏



\### –ú–µ–¥–∏–∞ –ø–∞–∫–µ—Ç—ã:

\- `image\_picker: ^1.1.2` - –í—ã–±–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

\- `file\_picker: ^8.0.0+1` - –í—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤

\- `record: ^5.2.1` - –ó–∞–ø–∏—Å—å –∞—É–¥–∏–æ

\- `audioplayers: ^6.1.0` - –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ



\### WebRTC –∏ –∑–≤–æ–Ω–∫–∏:

\- `flutter\_webrtc: ^0.10.0` - WebRTC

\- `flutter\_callkit\_incoming: ^2.0.0` - CallKit –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è



\### –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è:

\- `pointycastle: ^3.9.1` - –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã

\- `crypto: ^3.0.5` - –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —É—Ç–∏–ª–∏—Ç—ã



\### –î—Ä—É–≥–∏–µ:

\- `url\_launcher: ^6.2.1` - –û—Ç–∫—Ä—ã—Ç–∏–µ URL

\- `webview\_flutter: ^4.4.2` - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä

\- `share\_plus: ^7.2.1` - –ü–æ–¥–µ–ª–∏—Ç—å—Å—è

\- `permission\_handler: ^11.3.1` - –†–∞–∑—Ä–µ—à–µ–Ω–∏—è



---



\## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å



\### HTTP/HTTPS:

\- \*\*Android:\*\* `android:usesCleartextTraffic="true"` –≤ AndroidManifest.xml (–¥–ª—è ZeroTier HTTP)

\- \*\*iOS:\*\* `NSAllowsArbitraryLoads = true` –≤ Info.plist (–¥–ª—è ZeroTier HTTP)



\### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:

\- E2EE –¥–ª—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö —á–∞—Ç–æ–≤ (–±–∞–∑–æ–≤–æ–µ base64, —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏)

\- Signal Protocol –¥–ª—è –∑–≤–æ–Ω–∫–æ–≤ (Double Ratchet)

\- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏



\### –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å:

\- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –≤ SettingsService

\- –°–∫—Ä—ã—Ç–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ—Å–µ—â–µ–Ω–∏—è

\- –°–∫—Ä—ã—Ç–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–µ—á–∞—Ç–∏

\- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤

\- –°–∫—Ä—ã—Ç–∏–µ –ø–µ—Ä–µ—Å—ã–ª–∫–∏/–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

\- –°–∫—Ä—ã—Ç–∏–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞



---



\## üóÑÔ∏è –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö



\### SharedPreferences:

\- –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

\- –î–∞–Ω–Ω—ã–µ —á–∞—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

\- –ö–æ–Ω—Ç–∞–∫—Ç—ã

\- –ò—Å—Ç–æ—Ä–∏—è –±—Ä–∞—É–∑–µ—Ä–∞

\- –ó–∞–∫–ª–∞–¥–∫–∏

\- –°—Ç–∞—Ç—É—Å—ã

\- –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–Ω–∞–ª—ã



\### –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:

\- –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –º–µ–¥–∏–∞ —Ñ–∞–π–ª—ã

\- –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

\- –ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

\- –°—Ç–∞—Ç—É—Å—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)



\### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª—é—á–µ–π:

\- `chat\_threads\_v1` - —á–∞—Ç—ã

\- `chat\_contacts\_v1` - –∫–æ–Ω—Ç–∞–∫—Ç—ã

\- `chat\_blocked\_contacts\_v1` - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ

\- `chat\_ignored\_contacts\_v1` - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ

\- `chat\_custom\_names\_v1` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–º–µ–Ω–∞

\- `user\_\*` - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

\- `browser\_\*` - –¥–∞–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–∞

\- `channel\_\*` - –¥–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª–æ–≤

\- `user\_statuses` - —Å—Ç–∞—Ç—É—Å—ã



---



\## üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è



\### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:

\- –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)

\- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —á–∞—Ç–æ–≤

\- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

\- –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø–æ ID



\### –†—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:

\- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–∞—Ç–∞

\- –ü—Ä–∏ —Å–≤–∞–π–ø–µ –≤–Ω–∏–∑ (pull-to-refresh)

\- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏



---



\## üì± –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã



\### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:

\- ‚úÖ Android

\- ‚úÖ iOS

\- ‚úÖ Web

\- ‚úÖ Linux

\- ‚úÖ macOS

\- ‚úÖ Windows



\### –ü–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

\- \*\*Android/iOS:\*\* CallKit –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤

\- \*\*Android/iOS:\*\* –†–∞–∑—Ä–µ—à–µ–Ω–∏—è (–∫–∞–º–µ—Ä–∞, –º–∏–∫—Ä–æ—Ñ–æ–Ω, —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)

\- \*\*iOS:\*\* –ù–∞—Ç–∏–≤–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ Cupertino

\- \*\*Android:\*\* Material Design —ç–ª–µ–º–µ–Ω—Ç—ã



---



\## üé® –î–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º–∞



\### –¶–≤–µ—Ç–∞:

\- –ë–æ–≥–∞—Ç–∞—è —á–µ—Ä–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞ (–æ—Ç #000000 –¥–æ #252525)

\- –ê–∫—Ü–µ–Ω—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ ThemeProvider

\- –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å —Ä–∞–∑–º—ã—Ç–∏–µ–º



\### –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞:

\- 9 —à—Ä–∏—Ñ—Ç–æ–≤ –Ω–∞ –≤—ã–±–æ—Ä

\- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 16px)

\- 8 —Å—Ç–∏–ª–µ–π (Regular, Light, Medium, SemiBold, Bold, ExtraBold, Italic, Bold Italic)

\- Letter spacing: -0.0165 \* fontSize



\### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

\- Glass —ç—Ñ—Ñ–µ–∫—Ç—ã (—Ä–∞–∑–º—ã—Ç–∏–µ, –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å)

\- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏

\- Haptic feedback

\- –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã



---



\## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å



\### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

\- –û–ø—Ü–∏—è "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Mimu" –æ—Ç–∫–ª—é—á–∞–µ—Ç –∞–Ω–∏–º–∞—Ü–∏–∏

\- –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤

\- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

\- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

\- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö



\### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

\- –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞

\- –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ (–≤–∫–ª/–≤—ã–∫–ª)

\- –≠–∫–æ–Ω–æ–º–∏—è —ç–Ω–µ—Ä–≥–∏–∏

\- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π



---



\## üìù TODO / –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã



\### –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:

1\. \*\*AuthService\*\* - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º API –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–ª–æ–≥–∏–Ω–∞

2\. \*\*E2EE –¥–ª—è —á–∞—Ç–æ–≤\*\* - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö —á–∞—Ç–æ–≤

3\. \*\*Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\*\* - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è FCM/APNS

4\. \*\*–û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º\*\* - —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

5\. \*\*–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤\*\* - –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞

6\. \*\*–ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–≤–æ–Ω–∫–∏\*\* - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

7\. \*\*–í–∏–¥–µ–æ –∑–≤–æ–Ω–∫–∏\*\* - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏–¥–µ–æ –≤ –∑–≤–æ–Ω–∫–∞—Ö



\### –ü–∞–ø–∫–∞ "–ù–æ–≤–∞—è –ø–∞–ø–∫–∞":

\- –°–æ–¥–µ—Ä–∂–∏—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã —Ñ–∞–π–ª–æ–≤ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

\- –í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –∏–ª–∏ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è

\- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è



---



\## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º



\### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

\- \*\*Base URL:\*\* `http://10.147.17.50:8080` (ZeroTier)

\- \*\*WebSocket:\*\* `ws://10.147.17.50:8080/ws`

\- \*\*–¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤:\*\* 15 —Å–µ–∫—É–Ω–¥

\- \*\*–¢–∞–π–º–∞—É—Ç –∑–∞–≥—Ä—É–∑–∫–∏:\*\* 5 –º–∏–Ω—É—Ç



\### API Endpoints:

\- `POST /api/v1/messages` - —Å–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

\- `GET /api/v1/messages?chatId=...` - –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

\- `PUT /api/v1/messages/{messageId}` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

\- `DELETE /api/v1/messages/{messageId}` - —É–¥–∞–ª–∏—Ç—å

\- `POST /api/v1/messages/{messageId}/reactions` - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é

\- `POST /api/v1/messages/{messageId}/read` - –æ—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º

\- `POST /api/v1/messages/{messageId}/forward` - –ø–µ—Ä–µ—Å–ª–∞—Ç—å

\- `POST /api/v1/upload` - –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª

\- `GET /api/v1/files/{fileId}` - —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª

\- `GET /api/v1/files/{fileId}/info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ



\### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤:

\- `Content-Type: application/json`

\- `Accept: application/json`

\- `X-PrID: {prid}` - Public ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

\- `X-Client-Version: 1.0.0`

\- `X-Platform: android|ios|other`

\- `Authorization: Bearer {token}` - –¥–ª—è WebSocket



---



\## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ



\### –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

–í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:

\- URL –∑–∞–ø—Ä–æ—Å–∞

\- –ó–∞–≥–æ–ª–æ–≤–∫–∏

\- –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–¥–ª—è POST)

\- –°—Ç–∞—Ç—É—Å –∫–æ–¥ –æ—Ç–≤–µ—Ç–∞

\- –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞

\- –†–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

\- –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞



